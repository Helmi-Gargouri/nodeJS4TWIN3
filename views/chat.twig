<!DOCTYPE html>
<html>
<head>
    <title>Chat App</title>
    <script src="/socket.io/socket.io.js"></script>
    <style>
        #chat-container {
            width: 500px;
            height: 400px;
            border: 1px solid #ccc;
            overflow-y: scroll; 
            margin: 0 auto; 
            padding: 10px;
        }

        .message {
            margin-bottom: 10px;
        }

        #message-input {
            width: 100%;
            padding: 5px;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <script>
        var name= prompt('type ur name')
        
        var socket =io()
        socket.on('msg', (data) => {
            console.log(data)
            var p = document.createElement('p')
            p.innerText = data
            document.getElementById('chat-container').append(p)
        });

      
    </script>

    <h1>Chat</h1>

    <div id="chat-container">
    </div>

    <input type="text" id="message-input" placeholder="Enter message">

    <button id="send-button"  onclick ="sendMsg()">Send</button>
    <button id="send-button"  onclick ="displayMsg()">DisplayMsg</button>


    <script>
        function sendMsg() {
            var msg = document.getElementById('message-input').value;
            console.log(msg)
            var data = {name ,msg}
            console.log(data)
            socket.emit('send-msg', data)

        }
        function displayMsg() {
            socket.emit('displayMsg', 'afficher les msgs')

        }

        socket.on('msgList', (data)=>{
            console.log(data)
            for(i=0; i<data.length;i++ ){
                var p = document.createElment('p')
                p.innerText= data[i].msg
                document.getElementById('chat-container').append(p)
                }
        })

        const chatContainer = document.getElementById('chat-container');
        const messageInput = document.getElementById('message-input');
        const sendButton = document.getElementById('send-button');

        // Function to add a new message to the chat container
        function addMessage(message) {
            const messageDiv = document.createElement('div');
            messageDiv.classList.add('message');
            messageDiv.textContent = message;
            chatContainer.appendChild(messageDiv);
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        sendButton.addEventListener('click', () => {
            const message = messageInput.value;
            if (message.trim() !== '') {  
                addMessage(message);
                messageInput.value = ''; 
            }
        });


        addMessage("User 1: Hello!");
        addMessage("User 2: Hi there!");

    </script>

</body>
</html>